var schedules=[];function Schedule(){DOM.style.opacity=0,0==schedules.length?chrome.storage.local.get(["cookie"],function(e){if(e.cookie){var t="cookie="+e.cookie;xhr.addEventListener("readystatechange",function(e){4==this.readyState&&this.responseURL.indexOf("Schedules")>=0&&renderSchedule(schedules=JSON.parse(this.responseText))}),xhrRequest("Schedules",t)}else DOM.style.opacity=1,DOM.innerHTML='<div class="errorText">ERROR:: Cookie null</div>'}):renderSchedule(schedules)}function ChangePassword(){DOM.style.opacity=0,DOM.style.transform="translateY(10px)",setTimeout(function(){DOM.innerHTML='<div class="form flex" id="form"><div class="box"><input type="password" id="pw1" required><label>Mật khẩu mới</label></div><input type="checkbox" id="check"><layer>hiển thị mật khẩu</layer></div><layer id="msg"></layer><button id="update">cập nhật</button>',DOM.style.opacity=1,DOM.style.transform="translateY(0px)";var e=document.getElementById("update"),t=document.getElementById("pw1"),s=document.getElementById("check");document.addEventListener("keyup",function(e){"Enter"==e.key&&Change()}),s.addEventListener("click",function(e){s.checked?t.type="text":t.type="password"}),e.addEventListener("click",Change)},1e3)}function Change(){msg.innerText="",chrome.storage.local.get(["cookie","pass"],function(e){if(""==pw1.value||pw1.value==e.pass)msg.innerText="bạn chưa nhập mật khẩu mới...";else{chrome.storage.local.set({pass:pw1.value});var t="cookie="+e.cookie+"&oldPass="+e.pass+"&newPass="+pw1.value;xhr.addEventListener("readystatechange",function(e){4===this.readyState&&this.responseURL.indexOf("ChangePass")>=0&&(DOM.innerHTML='<div class="successText"><img src="'+host+'extension/img/tick.png" style="margin: 10px;"><p>'+this.responseText+"</p></div>")}),xhrRequest("ChangePass",t)}})}